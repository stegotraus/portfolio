<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="script2.js"></script>
    <link rel="stylesheet" href="style2.css">
    <title>test</title>
</head>
<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="display-4">Hello, world! I am in <span id="mode">Light Mode</span></h1>
            <p class="lead">Cet exemple illustre le changement du theme et la sauvegarde dans le cookie pour le conserver longtemps</p>
            <hr class="my-4">
            <p>Recharger la page pour voir le changement du theme</p>
            <a class="btn btn-primary btn-lg" id="theme-toggle" href="#" role="button">Changer de Th√®me</a>
        </div>
    </div>

    <script>
        var body = document.getElementsByTagName('body')[0];
        var dark_theme_class = 'dark-theme';
        var theme = getCookie('theme');

        if(theme != '') {
            body.classList.add(theme);
        }

        document.addEventListener('DOMContentLoaded', function () {


            $('#theme-toggle').on('click', function () {

                if (body.classList.contains(dark_theme_class)) {

                    body.classList.remove(dark_theme_class);
                    $('#mode').text('Light Mode')
                    setCookie('theme', 'light');

                }
                else {

                    $('#mode').text('Dark Mode')

                    body.classList.add(dark_theme_class);

                    setCookie('theme', 'dark-theme');

                }

            });

        });

        // enregistrement du theme dans le cookie

        function setCookie(name, value) {

            var d = new Date();
            d.setTime(d.getTime() + (365*24*60*60*1000));
            var expires = "expires=" + d.toUTCString();
            console.log(expires)
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
            console.log(document.cookie)

        }




        // methode de recuperation du theme dans le cookie

        function getCookie(cname) {

            var theme = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');

            for(var i = 0; i < ca.length; i++) {

                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }

                if (c.indexOf(theme) == 0) {
                    return c.substring(theme.length, c.length);
                }
            }
            return "";
        }

    </script>
</body>
</html>